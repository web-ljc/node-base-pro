## node-pro

### web开发模式
- 服务端渲染的优缺点
  - 优点
    - 前端耗时少。因为服务端负责生产html，浏览器只需直接渲染页面
    - 有利于SEO。爬虫更容易爬取页面信息
  - 缺点
    - 占用服务器资源
    - 不利于前后端分离，开发效率低
  - 企业网站

- 前后端分离的web开发模式
  - 优点
    - 开发体验好，前端专注于UI页面开发
    - 用户体验好
    - 减轻了服务器端的渲染压力
  - 缺点
    - 不利于SEO，可以利用SSR技术
  - 后台管理项目

### 身份认证
  - 身份认证又称鉴权，指通过一定的手段，完成对用户身份的确认
  - 确认当前所声称为某种身份的用户，确实是所声称的用户
  - 不同开发模式的身份认证
    - 服务端渲染，推荐session认证机制
      - Cookie是存储在用户浏览器中的一段不超过4kb的字符串，有name、value和其它几个用于控制Cookie有效期、安全性、使用范围的可选属性组成
      - 不同域名的cookie各自独立，每当客户端发起请求时，会自动把当前域名下所有未过期的Cookie一同发送给服务器
        - 自动发送
        - 域名独立
        - 过期时限
        - 4kb限制
      - 客户端在异地次请求服务器的时候，服务器通过响应头的形式，向客户端发送一个身份认证的Cookie，客户端会自动将Cookie保存在浏览器中
      - 之后，当客户端浏览器每次请求服务器的时候，浏览器会自动将身份认证的Cookie，通过请求头的形式发送给服务器，服务器即可验证身份。
      - Cookie不具有安全性，很容易被伪造。不要存储隐私重要的信息
    - session局限性
      - Session认证机制需要配合Cookie才能实现，由于Cookie默认不支持跨域访问，所以涉及到前端跨域请求后端接口，需要做很多额外的配置。

    - 前后端分离，推荐JWT认证机制
      - JSON Web Token 是目前最流行的跨域解决方案
      - 用户的信息通过Token字符串形式，保存在客户端浏览器中，服务器通过还原Token字符串的形式来认证用户的身份
      - 组成部分
        - Header 头部，安全相关的部分
        - Payload 有效荷载，才是真正的用户信息，它是用户信息经过加密后生成的字符串
        - Signature 签名，安全相关的部分
      - 使用方式
        - 客户端收到服务端的JWT之后，通常会存储在loaclStorage / sessionStorage中
        - 客户端每次与服务器通信，都要带上JWT的字符串，进行身份验认证。推荐做法把JWT放在HTTP请求头的Authorization字段中
      - 安装JWT相关包
        - jsonwebtoken 用于生成 JWT 字符串
        - express-jwt 用于将JWT字符串解析还原成JSON对象

### HTTP协议无状态性
  - 客户端的每次HTTP请求都是独立的，连续多个请求之间没有直接的恶联系，服务器不会主动保留每次HTTP请求的状态
